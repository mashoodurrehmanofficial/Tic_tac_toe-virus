<html lang="en">
<head>
    <title> Tic Tac Toe</title>
    <link rel="shortcut icon" href="./image/Dtafalonso-Android-Lollipop-Play-Games.ico" type="image/x-icon">
<style>
.lds-ring {
  display: inline-block;
  position: relative;
  width: 80px;
  height: 80px;
}
.lds-ring div {
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 64px;
  height: 64px;
  margin: 8px;
  border: 8px solid #fff;
  border-radius: 50%;
  animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: #fff transparent transparent transparent;
}
.lds-ring div:nth-child(1) {
  animation-delay: -0.45s;
}
.lds-ring div:nth-child(2) {
  animation-delay: -0.3s;
}
.lds-ring div:nth-child(3) {
  animation-delay: -0.15s;
}
@keyframes lds-ring {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

</style>
<script type="text/javascript" src="/eel.js"></script>
<link rel="stylesheet" href="./css/materialcss.css">
<link rel="stylesheet" href="./css/swalcss.css">
<script src="./js/materialjs.js"></script>     
<script src="./js/swaljs.js"></script>
</head>
<body class="grey lighten-4">


    <!-- <div class="container">
         <h3 id="state" class="grey-text text-darken-2">Downloding Components: 0%</h3>
        <div style="height: 5px;" class="progress">
            <div class="determinate" id="percent" style="width: 0%"></div>
        </div>
    </div> -->

     




    <!-- Download Animation -->
    <div class="container" id="loader" style="display: none; margin-top: 20%;"  >
    <div class="card-panel">
        <div class="row">
            <h5 id="statetext" class="col s10">Downloding Components</h5>
            <h5 id="state" class="col s2 right-align">0%</h5>
        </div>
        <div class="progress">
            <div class="determinate" id="percent"  style="width: 0%"></div>
        </div>
    </div>
    </div>

    <!-- Game DIV -->
    <div id="gamediv" style="display: none;">
        <!-- Reload Button -->
        <button onclick="location.reload()" class="btn cyan">Restart</button>
        <div>
            <!-- User_Selection -->
            <div id="user_sel">
                <h4 class="grey-text text-darken-2">Which one will start first</h4>
                <label>
                    <input class="with-gap" name="group1" type="radio" id="User 1" />
                    <span>User 1</span>
                </label> 
                <label>
                    <input class="with-gap" name="group1" type="radio"  id="User 2"/>
                    <span>User 2</span>
                </label>
            </div >  
            <!-- Symbol_Selection -->
            <div id="user_sym" style="display: none;">
                <h4 class="grey-text text-darken-2" id="pred_sym_heading"></h4>
                <label>
                    <input class="with-gap" name="group2" type="radio" id="x"/>
                    <span id="x">x</span>
                </label> 
                <label>
                    <input class="with-gap" name="group2" type="radio" id="0"/>
                    <span id="0">0</span>
                </label>
            </div >
            <!-- Game_Timer -->
            <h4 id="timer" style="display: none;">Time passed away: 0 sec</h4>

        </div>
    

        <div id="parent_3" style="display: none; margin-right: 30%;margin-left: 30%;">
            <table class="centered" id="table">
                <tbody>
                    <tr>
                        <td id="1"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                        <td id="2"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                        <td id="3"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                    </tr>
                    <tr>
                        <td id="4"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                        <td id="5"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                        <td id="6"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                    </tr>
                    <tr>
                        <td id="7"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                        <td id="8"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                        <td id="9"><div id="lds-ring"> <div class="lds-ring"><div></div><div></div><div></div><div></div></div></div></td>
                    </tr>
                </tbody>
            </table>
        </div>


        <div id="result_parent" style="display: none;" class="green"><h2 id="result_text">Winner is: </h2></div>

    </div>


<script> 
document.addEventListener('contextmenu', event => event.preventDefault());

eel.expose(jshide)
function jshide(){
    document.getElementById('gamediv').style.display='block'
    document.getElementById('loader').style.display='none'
}
eel.expose(jsshow)
function jsshow(){
    document.getElementById('gamediv').style.display='none'
    document.getElementById('loader').style.display='block'
}
window.onload = function(){
    eel.starter()
}
eel.expose(append)
function append(num){
    var new_val = parseInt(document.getElementById('percent').style.width)
    if(new_val<100){
        new_val+=num
        document.getElementById('percent').style.width = new_val+'%'
        document.getElementById('state').innerHTML = new_val+'%'
    }
    if(new_val>=100){
    setTimeout(() => {
        document.getElementById('loader').style.display='none'
        document.getElementById('gamediv').style.display='block'
    }, 1000);
 }
}

</script>


<script>
var percent = document.getElementById('percent').style.width
//  Local_Variables
var tdtag = document.getElementsByTagName('td') ; 
var table = document.getElementById('table') ;
var parent1 = document.getElementById('user_sel') ;
var parent2 = document.getElementById('user_sym') ;
var parent_3 = document.getElementById('parent_3') ;
var user_sel = document.getElementsByName('group1') ;
var user_sym = document.getElementsByName('group2') ;
var timer = document.getElementById('timer') ;
var lds_ring = document.getElementById('lds-ring') ;
var pred_sym_heading = document.getElementById('pred_sym_heading') ;
var result_parent = document.getElementById('result_parent')
var result_text = document.getElementById('result_text') ;
var selection1_array = [], selection2_array = [], storage_array = [] ;

//  Serie_Variables
var c_1 = document.getElementById('1')
var c_2 = document.getElementById('2')
var c_3 = document.getElementById('3')
var c_4 = document.getElementById('4')
var c_5 = document.getElementById('5')
var c_6 = document.getElementById('6')
var c_7 = document.getElementById('7')
var c_8 = document.getElementById('8')
var c_9 = document.getElementById('9')

//  Selection 1
for(i=0; i<user_sel.length; i++){
    user_sel[i].addEventListener('change', function(){
        parent1.remove() ;
        selection1_array.push(this.id)
        pred_sym_heading.innerText = `Symbol used by ${this.id}`
        parent2.style.display = 'block'
    })
}
//  Selection 2
var j=1
for(i=0;  i<user_sym.length; i++){
    user_sym[i].addEventListener('change', function(){
        parent2.remove() ;
        selection1_array.push(this.id)
        selection2_array.push(this.id) ;
        timer.style.display = 'block' 
        setInterval(() => { timer.innerText = `Time passed away: ${j} sec` ;j++ }, 1000);
        parent_3.style.display = 'block';
    })
}
//  Cell Styling
for(i=0; i<tdtag.length; i++){
    tdtag[i].style.height = '110px'
    tdtag[i].style.width = '110px'
    tdtag[i].style.fontSize = '60px'
    tdtag[i].style.color = '#f5f5f5'
    tdtag[i].style.background = '#00bcd4'
}

// Sequence_Keeper and Validation
for(i=0; i<tdtag.length; i++){
    tdtag[i].addEventListener('click', function(){
        if(selection2_array[0] === '0'){
            if(this.innerHTML === '0' || this.innerHTML === 'x'){
                alert('This cell has been filled by a user') ;
            } else {
                this.innerHTML = '0' ;
                selection2_array.splice(selection2_array.indexOf('0'), 1) ;
                selection2_array.push('x')
                storage_array.push(`x`)
            }
        } else {
            if(this.innerHTML === '0' || this.innerHTML === 'x'){
                alert('This cell has been filled by a user') ;
            } else {
                this.innerHTML = 'x' ;
                selection2_array.splice(selection2_array.indexOf('x'), 1) ;
                selection2_array.push('0')
                storage_array.push(`0`)
            }
        }
    }) 
    // Decision_Making
        setInterval(() => {
        if (storage_array.length >=5) {
            // =================================== PATTERNS for X ============================= //
            // Number: 1
            if (c_1.innerHTML=='x' && c_2.innerHTML=='x' && c_3.innerHTML=='x') {
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            } 
            else if(c_4.innerHTML=='x' && c_5.innerHTML=='x' && c_6.innerHTML=='x'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            }
            else if(c_7.innerHTML=='x' && c_8.innerHTML=='x' && c_9.innerHTML=='x'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            }
            // Number: 2
            else if(c_1.innerHTML=='x' && c_4.innerHTML=='x' && c_7.innerHTML=='x'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            }
            else if(c_2.innerHTML=='x' && c_5.innerHTML=='x' && c_8.innerHTML=='x'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            }
            else if(c_3.innerHTML=='x' && c_6.innerHTML=='x' && c_9.innerHTML=='x'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            }
            // Number: 3
            else if(c_1.innerHTML=='x' && c_5.innerHTML=='x' && c_9.innerHTML=='x'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            }
            else if(c_3.innerHTML=='x' && c_5.innerHTML=='x' && c_7.innerHTML=='x'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: x'
            }
            // =================================== PATTERNS for 0 ============================= //
            // Number: 1
            else if (c_1.innerHTML=='0' && c_2.innerHTML=='0' && c_3.innerHTML=='0') {
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            } 
            else if(c_4.innerHTML=='0' && c_5.innerHTML=='0' && c_6.innerHTML=='0'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            }
            else if(c_7.innerHTML=='0' && c_8.innerHTML=='0' && c_9.innerHTML=='0'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            }
            // Number: 2
            else if(c_1.innerHTML=='0' && c_4.innerHTML=='0' && c_7.innerHTML=='0'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            }
            else if(c_2.innerHTML=='0' && c_5.innerHTML=='0' && c_8.innerHTML=='0'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            }
            else if(c_3.innerHTML=='0' && c_6.innerHTML=='0' && c_9.innerHTML=='0'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            }
            // Number: 3
            else if(c_1.innerHTML=='0' && c_5.innerHTML=='0' && c_9.innerHTML=='0'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            }
            else if(c_3.innerHTML=='0' && c_5.innerHTML=='0' && c_7.innerHTML=='0'){
                result_parent.style.display = 'block' ;
                result_text.innerHTML = 'Winner is: 0'
            }
        }
    }, 100);
}
// function alert() {
//     Swal.fire({ 
//         icon: 'error',
//         title: 'Oops...',
//         text: `This cell has been filled by a user`,
//         })
// }



</script>
</body>
</html>